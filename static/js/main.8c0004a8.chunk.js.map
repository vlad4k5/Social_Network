{"version":3,"sources":["components/Navbar/Navbar.module.scss","components/common/TextError/TextError.module.scss","components/Users/Users.module.scss","components/Settings/Settings.module.scss","components/common/Paginator/Paginator.module.scss","components/Profile/ProfileInfo/ProfileInfo.module.scss","hocs/withAuthRedirect.tsx","store/dialogs-reducer.ts","assets/images/basicUserPhoto.png","components/Dialogs/DialogsUser.tsx","components/Dialogs/DialogsMessage.tsx","components/Dialogs/Dialogs.tsx","assets/images/logo.svg","api/instance-api.ts","api/auth-api.ts","api/profile-api.ts","store/profile-reducer.ts","store/auth-reducer.ts","components/Header/Header.tsx","components/common/TextError/TextError.tsx","components/Login/Login.tsx","components/Navbar/Navbar.tsx","components/Profile/Posts/Post.tsx","components/Profile/Posts/Posts.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/Profile.tsx","components/Settings/Settings.tsx","api/users-api.ts","components/common/Paginator/Paginator.tsx","components/Users/UserItem/UserItem.tsx","components/Users/UsersSearchForm/UsersSearchForm.tsx","assets/images/preloader.gif","components/Users/Users.tsx","App.tsx","store/users-reducer.ts","store/store.ts","index.tsx","components/Dialogs/Dialogs.module.scss","components/Header/Header.module.scss","components/Profile/Posts/Posts.module.scss","components/Login/Login.module.scss","components/Users/UserItem/UserItem.module.scss","App.module.scss","components/Users/UsersSearchForm/UsersSearchForm.module.scss"],"names":["module","exports","mapSateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","props","restProps","to","ADD_NEW_MESSAGE","initialState","users","userName","id","messages","dialogsActions","addNewMessage","message","type","dialogsReducer","action","DialogsUser","className","s","dialogsUserWrapper","src","basicPhoto","dialogsUserPhoto","alt","linkToUserChat","DialogsMessage","dialogsMessageWrapper","compose","dialogs","dialogsUsers","map","u","dialogsMessages","m","index","dialogsWrapper","initialValues","onSubmit","values","resetForm","as","name","instance","axios","create","baseURL","withCredentials","headers","authAPI","get","then","res","data","delete","loginData","post","profileAPI","userId","profile","put","status","photoFile","formData","FormData","append","SET_PROFILE","SET_STATUS","SET_PHOTO","ADD_NEW_POST","profileInfo","posts","likesCount","profileActions","setProfile","setStatus","setPhoto","photos","addNewPost","postText","getProfile","dispatch","a","getStatus","profileReducer","newPost","length","SET_USER_DATA","SET_CAPTCHA","SET_ERROR_MESSAGE","userData","email","login","captcha","errorMessage","authActions","userAuthorizing","resultCode","authReducer","logout","header_wrapper","mediaBlock","logo","slogan","loginBlock","linkToProfile","onClick","logoutButton","linkToLogin","TextError","children","error","captchaRes","url","validationSchema","Yup","required","nullable","password","loginWrapper","rememberMe","serverErrorMessage","loginItem","component","placeholder","htmlFor","captchaBlock","err","loginButton","Navbar","navbar","navbar__Item","link","activeClassName","active","Post","userPhoto","likeBlock","likeButton","Posts","isOwner","profilePosts","reverse","p","field","postField","newPostButton","ProfileInfo","updateStatus","updatePhoto","console","log","useState","statusEditMode","setStatusEditMode","statusText","setStatusText","useEffect","profileInfo_wrapper","large","ownerPhoto","onChange","e","target","files","editProfile","aboutMe","fullName","userStatus","value","currentTarget","onBlur","autoFocus","aboutMeInfo","jobInfo","lookingForAJob","lookingForAJobDescription","contactsBlock","ownerId","withRouter","match","params","small","updateProfile","contacts","facebook","website","vk","twitter","instagram","youtube","github","mainLink","max","settingsComponent","settingsWrapper","toggle","submitButton","usersAPI","count","page","term","Paginator","totalItemsCount","onPageChanged","currentPage","itemsPerPage","loading","pagesInPaginator","totalPages","Math","ceil","lastPage","pages","i","push","activePage","paginatorWrapper","disabled","UserItem","photo","followed","isFollowed","setIsFollowed","isLoading","follow","unfollow","userItem","userInfo","subscribeBlock","followedButton","unfollowedButton","UsersSearchForm","searchField","searchButton","setLoading","setUsers","setCurrentPage","totalUsersCount","setTotalUsersCount","items","totalCount","fetchUsers","showUsers","preloaderBlock","preloader","app__Wrapper","app__Header","app__Navbar","app__Content","exact","from","path","render","SET_USERS","usersReducer","rootReducer","combineReducers","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunk","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.8c0004a8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navbar_link__1mMTW\",\"active\":\"Navbar_active__1rGjo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"TextError_error__2Wr7d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloaderBlock\":\"Users_preloaderBlock__1807c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settingsComponent\":\"Settings_settingsComponent__3y_b_\",\"settingsWrapper\":\"Settings_settingsWrapper__1kBQ5\",\"toggle\":\"Settings_toggle__36KCx\",\"errorMessage\":\"Settings_errorMessage__1QK2l\",\"submitButton\":\"Settings_submitButton__2VnsO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginatorWrapper\":\"Paginator_paginatorWrapper__-TPRt\",\"activePage\":\"Paginator_activePage__2cdnt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileInfo_wrapper\":\"ProfileInfo_profileInfo_wrapper__3fTXR\",\"userPhoto\":\"ProfileInfo_userPhoto__MPJ12\",\"ownerPhoto\":\"ProfileInfo_ownerPhoto__7uaro\",\"photoFile\":\"ProfileInfo_photoFile__1jKbj\",\"editProfile\":\"ProfileInfo_editProfile__HwzNl\",\"aboutMe\":\"ProfileInfo_aboutMe__1y4EJ\",\"userName\":\"ProfileInfo_userName__3DjFm\",\"userStatus\":\"ProfileInfo_userStatus__1EfvW\",\"contactsBlock\":\"ProfileInfo_contactsBlock__1UKVl\",\"contacts\":\"ProfileInfo_contacts__2_y-8\"};","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router\";\r\nimport { AppStateType } from \"../store/store\";\r\n\r\ntype PropsType = {\r\n    isAuth: boolean | null\r\n}\r\n\r\nconst mapSateToProps = (state: AppStateType) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nfunction withAuthRedirect<WCP>(Component: React.ComponentType<WCP>) {\r\n    function RedirectComponent(props: PropsType) {\r\n        let { isAuth, ...restProps } = props\r\n        if (isAuth === false) return <Redirect to=\"/login\" />\r\n\r\n        return < Component {...restProps as unknown as WCP} />\r\n    }\r\n    const ConnectAuthRedirectComponent = connect<PropsType, {}, WCP, AppStateType>(mapSateToProps)(RedirectComponent);\r\n\r\n    return ConnectAuthRedirectComponent\r\n}\r\n\r\n\r\nexport default withAuthRedirect","import { InferActionTypes } from \"./store\";\r\nimport { UserDialogType } from \"./types/types\";\r\n\r\nconst ADD_NEW_MESSAGE = \"SN/DIALOGS/ADD_NEW_MESSAGE\";\r\n\r\n\r\nlet initialState = {\r\n    users: [\r\n        { userName: \"Dmitry\", id: 1 },\r\n        { userName: \"Alexander\", id: 2 },\r\n        { userName: \"Vladimir\", id: 3 },\r\n        { userName: \"Konstantin\", id: 4 },\r\n        { userName: \"Maxim\", id: 5 }] as Array<UserDialogType>,\r\n    messages: [\"Hello, my name is Dmitry\", \"What's up?\", \"How old are you?\", \"Where are you from?\", \"Nice to meet you! :)\"] as Array<string>\r\n}\r\n\r\n\r\nconst dialogsReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case ADD_NEW_MESSAGE: {\r\n            return { ...state, messages: [...state.messages, action.message] }\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\n\r\nexport const dialogsActions = {\r\n    addNewMessage: (message: string) => ({ type: ADD_NEW_MESSAGE, message } as const)\r\n}\r\n\r\n\r\n\r\nexport default dialogsReducer;\r\n\r\n\r\ntype InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionTypes<typeof dialogsActions>","export default __webpack_public_path__ + \"static/media/basicUserPhoto.94cf7531.png\";","import { NavLink } from \"react-router-dom\";\r\nimport s from \"./Dialogs.module.scss\";\r\nimport basicPhoto from \"../../assets/images/basicUserPhoto.png\";\r\n\r\n\r\ntype PropsType = {\r\n    userName: string\r\n}\r\n\r\nconst DialogsUser: React.FC<PropsType> = ({ userName }) => {\r\n    return <div className={s.dialogsUserWrapper}>\r\n        <img src={basicPhoto} className={s.dialogsUserPhoto} alt={\"User avatar\"} />\r\n        <NavLink className={s.linkToUserChat} to=\"/profile/17001\">{userName}</NavLink>\r\n    </div>\r\n}\r\n\r\n\r\nexport default DialogsUser\r\n","import s from \"./Dialogs.module.scss\";\r\nimport basicPhoto from \"../../assets/images/basicUserPhoto.png\";\r\n\r\n\r\ntype PropsType = {\r\n    message: string\r\n}\r\n\r\nconst DialogsMessage: React.FC<PropsType> = ({ message }) => {\r\n    return <div className={s.dialogsMessageWrapper}>\r\n        <img src={basicPhoto} className={s.dialogsUserPhoto} alt={\"User avatar\"} />\r\n        <span>{message}</span>\r\n    </div>\r\n}\r\n\r\n\r\nexport default DialogsMessage","import s from \"./Dialogs.module.scss\";\r\nimport { compose } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport withAuthRedirect from \"../../hocs/withAuthRedirect\";\r\nimport { Field, Form, Formik, FormikHelpers } from \"formik\";\r\nimport { dialogsActions } from \"../../store/dialogs-reducer\";\r\nimport DialogsUser from \"./DialogsUser\";\r\nimport DialogsMessage from \"./DialogsMessage\";\r\nimport { UserDialogType } from \"../../store/types/types\";\r\nimport { AppStateType } from \"../../store/store\";\r\nimport React from \"react\";\r\n\r\n\r\ntype TStateProps = {\r\n    users: Array<UserDialogType>\r\n    messages: Array<string>\r\n}\r\ntype TDispatchProps = {\r\n    addNewMessage: (message: string) => void\r\n}\r\n\r\ntype PropsType = TStateProps & TDispatchProps\r\n\r\nconst Dialogs: React.FC<PropsType> = ({ users, messages, addNewMessage }) => {\r\n    const dialogsUsers = users.map(u => <DialogsUser key={u.id} userName={u.userName} />)\r\n    const dialogsMessages = messages.map((m, index) => <DialogsMessage key={index} message={m} />)\r\n\r\n    interface Values {\r\n        message: string\r\n    }\r\n\r\n    const onSubmit = (values: Values, { resetForm }: FormikHelpers<Values>) => {\r\n        addNewMessage(values.message);\r\n        resetForm();\r\n    }\r\n\r\n    return <div>\r\n        <h1>Messages</h1> <hr />\r\n        <div className={s.dialogsWrapper}>\r\n            <div className={s.dialogsUsers}>\r\n                {dialogsUsers}\r\n            </div>\r\n            <div className={s.dialogsMessages}>\r\n                {dialogsMessages}<hr />\r\n                <Formik initialValues={{ message: \"\" }} onSubmit={onSubmit}>\r\n                    <Form>\r\n                        <Field as=\"textarea\" id=\"message\" name=\"message\" /><br />\r\n                        <button type=\"submit\">Send message</button>\r\n                    </Form>\r\n                </Formik>\r\n            </div>\r\n        </div>\r\n    </div >\r\n}\r\n\r\n\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n    users: state.dialogs.users,\r\n    messages: state.dialogs.messages\r\n})\r\n\r\n\r\nexport default compose<React.ComponentType>(\r\n    withAuthRedirect,\r\n    connect<TStateProps, TDispatchProps, {}, AppStateType>(mapStateToProps, { addNewMessage: dialogsActions.addNewMessage })\r\n)(Dialogs)","export default __webpack_public_path__ + \"static/media/logo.e68b35f4.svg\";","import axios from \"axios\";\r\n\r\n\r\n\r\nexport const instance = axios.create({\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.0\",\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': \"59cbca27-652d-4a07-9bc2-6419916cee9e\"\r\n    }\r\n})\r\n\r\nexport type BasicResponseType = {\r\n    resultCode: number\r\n    messages: Array<string>\r\n}\r\n\r\nexport type ResponseWithDataType<D> = {\r\n    data: D\r\n    resultCode: number\r\n    messages: Array<string>\r\n}","import { LoginDataType } from \"../store/types/types\";\r\nimport { BasicResponseType, instance, ResponseWithDataType } from \"./instance-api\";\r\n\r\n\r\n\r\n\r\ntype TUserAuthorizedData = {\r\n    id: number\r\n    email: string\r\n    login: string\r\n}\r\ntype TLoginData = {\r\n    userId: number\r\n}\r\ntype TgetCaptcha = {\r\n    url: string\r\n}\r\n\r\nexport const authAPI = {\r\n    isUserAuthorized() {\r\n        return instance.get<ResponseWithDataType<TUserAuthorizedData>>(\"/auth/me\").then(res => res.data)\r\n    },\r\n    logout() {\r\n        return instance.delete<BasicResponseType>(\"/auth/login\").then(res => res.data)\r\n    },\r\n    login(loginData: LoginDataType) {\r\n        return instance.post<ResponseWithDataType<TLoginData>>(\"/auth/login\", loginData).then(res => res.data)\r\n    },\r\n    getCaptcha() {\r\n        return instance.get<TgetCaptcha>(\"/security/get-captcha-url\").then(res => res.data)\r\n    }\r\n}\r\n","import { PhotosType, ProfileInfoType } from \"../store/types/types\";\r\nimport { BasicResponseType, instance, ResponseWithDataType } from \"./instance-api\";\r\n\r\n\r\ntype SetPhotoDataType = {\r\n    photos: PhotosType\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number) {\r\n        return instance.get<ProfileInfoType>(`/profile/${userId}`).then(res => res.data)\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance.get<string>(`/profile/status/${userId}`).then(res => res.data)\r\n    },\r\n\r\n    setProfile(profile: ProfileInfoType) {\r\n        return instance.put<BasicResponseType>(\"/profile\", profile).then(res => res.data)\r\n    },\r\n    setStatus(status: string) {\r\n        return instance.put<BasicResponseType>(\"/profile/status\", { status }).then(res => res.data)\r\n    },\r\n    setUserImage(photoFile: File) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photoFile)\r\n        return instance.put<ResponseWithDataType<SetPhotoDataType>>(\"/profile/photo\", formData, { headers: { \"Content-Type\": \"multipart/form-data\" } }).then(res => res.data)\r\n    }\r\n}\r\n\r\n","import { profileAPI } from \"../api/profile-api\"\r\nimport { InferActionTypes } from \"./store\"\r\nimport { CommonThunkCreatorType, PhotosType, PostType, ProfileInfoType } from \"./types/types\"\r\n\r\nconst SET_PROFILE = \"SN/PROFILE/SET_PROFILE\"\r\nconst SET_STATUS = \"SN/PROFILE/SET_STATUS\"\r\nconst SET_PHOTO = \"SN/PROFILE/SET_PHOTO\"\r\nconst ADD_NEW_POST = \"SN/PROFILE/ADD_NEW_POST\"\r\n\r\n\r\n\r\nlet initialState = {\r\n    status: \"\",\r\n    profileInfo: null as ProfileInfoType | null,\r\n    posts: [\r\n        { id: 1, message: \"My first post\", likesCount: 190 },\r\n        { id: 2, message: \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\", likesCount: 21 },\r\n        { id: 3, message: \"Just an example\", likesCount: 16 },\r\n    ] as Array<PostType>\r\n}\r\n\r\n\r\nconst profileReducer = (state = initialState, action: ProfileActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_PROFILE: {\r\n            return { ...state, profileInfo: action.profileInfo }\r\n        }\r\n        case SET_STATUS: {\r\n            return { ...state, status: action.status }\r\n        }\r\n        case SET_PHOTO: {\r\n            return { ...state, profileInfo: { ...state.profileInfo, photos: action.photos } as ProfileInfoType }\r\n        }\r\n        case ADD_NEW_POST: {\r\n            let newPost = { id: state.posts.length + 1, message: action.postText, likesCount: 0 }\r\n            return { ...state, posts: [...state.posts, newPost] }\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\n\r\nexport const profileActions = {\r\n    setProfile: (profileInfo: ProfileInfoType | null) => ({ type: SET_PROFILE, profileInfo } as const),\r\n    setStatus: (status: string) => ({ type: SET_STATUS, status } as const),\r\n    setPhoto: (photos: PhotosType) => ({ type: SET_PHOTO, photos } as const),\r\n    addNewPost: (postText: string) => ({ type: ADD_NEW_POST, postText } as const)\r\n}\r\n\r\n\r\n\r\n\r\nexport const getProfile = (userId: number): ThunkType => async dispatch => {\r\n    const res = await profileAPI.getProfile(userId)\r\n\r\n    dispatch(profileActions.setProfile(res))\r\n}\r\n\r\nexport const updateProfile = (profileInfo: ProfileInfoType): ThunkType => async dispatch => {\r\n    const res = await profileAPI.setProfile(profileInfo)\r\n\r\n    if (res.resultCode === 0) {\r\n        dispatch(profileActions.setProfile(profileInfo))\r\n    }\r\n}\r\n\r\n\r\nexport const getStatus = (userId: number): ThunkType => async dispatch => {\r\n    const res = await profileAPI.getStatus(userId)\r\n    if (res === null) {\r\n        dispatch(profileActions.setStatus(\"\"))\r\n    } else {\r\n        dispatch(profileActions.setStatus(res))\r\n    }\r\n}\r\n\r\nexport const updateStatus = (status: string): ThunkType => async dispatch => {\r\n    const res = await profileAPI.setStatus(status)\r\n    if (res.resultCode === 0) {\r\n        dispatch(profileActions.setStatus(status))\r\n    }\r\n}\r\n\r\n\r\nexport const updatePhoto = (photoFile: File): ThunkType => async dispatch => {\r\n    const res = await profileAPI.setUserImage(photoFile)\r\n    if (res.resultCode === 0) {\r\n        dispatch(profileActions.setPhoto(res.data.photos))\r\n    }\r\n}\r\n\r\n\r\nexport default profileReducer;\r\n\r\n\r\ntype InitialStateType = typeof initialState;\r\nexport type ProfileActionsType = InferActionTypes<typeof profileActions>\r\ntype ThunkType = CommonThunkCreatorType<ProfileActionsType>","import { InferActionTypes } from './store';\r\nimport { authAPI } from \"../api/auth-api\"\r\nimport { getProfile, getStatus, profileActions, ProfileActionsType } from \"./profile-reducer\";\r\nimport { CommonThunkCreatorType, LoginDataType, UserDataType } from \"./types/types\";\r\n\r\nconst SET_USER_DATA = \"SN/AUTH/SET_USER_DATA\"\r\nconst SET_CAPTCHA = \"SN/AUTH/SET_CAPTCHA\"\r\nconst SET_ERROR_MESSAGE = \"SN/AUTH/SET_ERROR_MESSAGE\"\r\n\r\n\r\nlet initialState = {\r\n    userData: {\r\n        email: null as string | null,\r\n        id: null as number | null,\r\n        login: null as string | null\r\n    } as UserDataType,\r\n    isAuth: null as boolean | null,\r\n    captcha: null as string | null,\r\n    errorMessage: null as string | null\r\n}\r\n\r\n\r\n\r\nconst authReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA: {\r\n            return { ...state, isAuth: action.isAuth, userData: action.userData ? action.userData : { email: null, id: null, login: null } }\r\n        }\r\n        case SET_CAPTCHA: {\r\n            return { ...state, captcha: action.captcha }\r\n        }\r\n        case SET_ERROR_MESSAGE: {\r\n            return { ...state, errorMessage: action.errorMessage }\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const authActions = {\r\n    setUserData: (isAuth: boolean, userData: UserDataType | null) => ({ type: SET_USER_DATA, isAuth, userData } as const),\r\n    setCaptcha: (captcha: string | null) => ({ type: SET_CAPTCHA, captcha } as const),\r\n    setErrorMessage: (errorMessage: string | null) => ({ type: SET_ERROR_MESSAGE, errorMessage } as const)\r\n}\r\n\r\n\r\n\r\n\r\nexport const userAuthorizing = (): ThunkType => async dispatch => {\r\n    const res = await authAPI.isUserAuthorized()\r\n    if (res.resultCode === 0) {\r\n        dispatch(authActions.setUserData(true, res.data));\r\n        dispatch(getProfile(res.data.id));\r\n        dispatch(getStatus(res.data.id));\r\n    } else {\r\n        dispatch(authActions.setUserData(false, null));\r\n    }\r\n}\r\n\r\n\r\nexport const logout = (): ThunkType => async dispatch => {\r\n    const res = await authAPI.logout()\r\n    if (res.resultCode === 0) {\r\n        dispatch(authActions.setUserData(false, null));\r\n        dispatch(profileActions.setProfile(null));\r\n        dispatch(profileActions.setStatus(\"\"));\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const login = (loginData: LoginDataType): ThunkType => async dispatch => {\r\n    const res = await authAPI.login(loginData)\r\n    if (res.resultCode === 0) {\r\n        dispatch(userAuthorizing());\r\n        dispatch(authActions.setErrorMessage(null));\r\n        dispatch(authActions.setCaptcha(null))\r\n    } else if (res.resultCode === 10) {\r\n        dispatch(authActions.setErrorMessage(res.messages[0]))\r\n        const captchaRes = await authAPI.getCaptcha()\r\n        dispatch(authActions.setCaptcha(captchaRes.url))\r\n    }\r\n}\r\n\r\n\r\nexport default authReducer;\r\n\r\n\r\n\r\ntype InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionTypes<typeof authActions>\r\ntype ThunkType = CommonThunkCreatorType<ActionsType | ProfileActionsType>","import React from \"react\";\r\nimport s from \"./Header.module.scss\"\r\nimport logo from \"../../assets/images/logo.svg\"\r\nimport { connect } from \"react-redux\";\r\nimport { logout } from \"../../store/auth-reducer\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { AppStateType } from \"../../store/store\";\r\n\r\ntype TStateProps = {\r\n    isAuth: boolean | null\r\n    userName: string | null\r\n}\r\ntype TDispatchProps = {\r\n    logout: () => void\r\n}\r\ntype PropsType = TStateProps & TDispatchProps\r\n\r\nconst Header: React.FC<PropsType> = ({ isAuth, logout, userName }) => {\r\n\r\n    return <div className={s.header_wrapper}>\r\n        <div className={s.mediaBlock}>\r\n            <img src={logo} className={s.logo} alt=\"Social-Network logo\" />\r\n            <h2 className={s.slogan}>Social Network</h2>\r\n        </div>\r\n        {isAuth ?\r\n            <div className={s.loginBlock}>\r\n                <NavLink to=\"/profile\" className={s.linkToProfile}>{userName}</NavLink>\r\n                    <button onClick={logout} className={s.logoutButton}>Log out</button>\r\n            </div>\r\n            : <div className={s.loginBlock}>\r\n                <NavLink to=\"/login\" className={s.linkToLogin} >\r\n                    <button className={s.logoutButton}>Log in</button>\r\n                </NavLink>\r\n            </div>\r\n        }\r\n\r\n    </div >\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n    isAuth: state.auth.isAuth,\r\n    userName: state.auth.userData.login\r\n})\r\n\r\nexport default connect<TStateProps, TDispatchProps, {}, AppStateType>(mapStateToProps, { logout })(Header);\r\n","import React from \"react\";\r\nimport s from \"./TextError.module.scss\"\r\n\r\n\r\nconst TextError: React.FC<any> = ({ children }) => { \r\n    return <span className={s.error}>\r\n        {children}\r\n    </span>\r\n}\r\n\r\nexport default TextError;","import { ErrorMessage, Field, Form, Formik } from \"formik\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router\";\r\nimport { login } from \"../../store/auth-reducer\";\r\nimport s from \"./Login.module.scss\"\r\nimport * as Yup from \"yup\";\r\nimport TextError from \"../common/TextError/TextError\";\r\nimport { LoginDataType } from \"../../store/types/types\";\r\nimport { AppStateType } from \"../../store/store\";\r\n\r\ntype TStateProps = {\r\n    isAuth: boolean | null\r\n    captcha: string | null\r\n    errorMessage: string | null\r\n}\r\ntype TDispatchProps = {\r\n    login: (loginData: LoginDataType) => void\r\n}\r\ntype PropsType = TStateProps & TDispatchProps\r\n\r\nconst Login: React.FC<PropsType> = ({ isAuth, captcha, login, errorMessage }) => {\r\n\r\n    interface Values {\r\n        email: string\r\n        password: string\r\n        rememberMe: boolean\r\n        captcha: string | null\r\n    }\r\n\r\n\r\n    const onSubmit = (values: Values) => {\r\n        login(values);\r\n    }\r\n\r\n    const validationSchema = Yup.object({\r\n        email: Yup.string().email(\" Invalid e-mail format!\").required(\" Field is required!\").nullable(),\r\n        password: Yup.string().required(\" Field is required!\").nullable()\r\n    })\r\n\r\n    if (isAuth) {\r\n        return <Redirect to=\"/profile\" />\r\n    }\r\n\r\n    return <div className={s.loginWrapper}>\r\n        \r\n        < Formik initialValues={{\r\n            email: \"\",\r\n            password: \"\",\r\n            rememberMe: false,\r\n            captcha: null\r\n        }}\r\n            onSubmit={onSubmit}\r\n            validationSchema={validationSchema}\r\n        >\r\n            <Form>\r\n            <h2>Login Page </h2>\r\n                {errorMessage && <div className={s.serverErrorMessage}> {errorMessage} </div>}\r\n            <div className={s.loginItem} >\r\n                < ErrorMessage name=\"email\" component={TextError} /> \r\n                < Field type=\"text\" name=\"email\" placeholder=\"Email Address\" />\r\n            </div>\r\n\r\n            <div className={s.loginItem} >\r\n                < ErrorMessage name=\"password\" component={TextError} /> \r\n                < Field type=\"password\" name=\"password\" placeholder=\"Password\" />\r\n            </div>\r\n\r\n            < div className={s.loginItem} >\r\n            < Field type=\"checkbox\" id=\"rememberMe\" name=\"rememberMe\" />\r\n            <label htmlFor=\"rememberMe\" > Remember me: </label>\r\n            </div>\r\n\r\n            {captcha ? <div className={s.captchaBlock}>\r\n                < img src={captcha} alt=\"captcha\" />\r\n                <label htmlFor=\"captcha\" className={s.err} > Please write a symbols from  captcha: </label>\r\n                <Field type=\"text\" id=\"captcha\" name=\"captcha\" />\r\n            </div> : null}\r\n\r\n            < button className={s.loginButton}> Login </button>\r\n            </Form>\r\n        </Formik>\r\n\r\n    </div >\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n    isAuth: state.auth.isAuth,\r\n    captcha: state.auth.captcha,\r\n    errorMessage: state.auth.errorMessage\r\n})\r\n\r\nexport default connect<TStateProps, TDispatchProps, {}, AppStateType>(mapStateToProps, { login })(Login);\r\n","import { NavLink } from \"react-router-dom\";\r\nimport s from \"./Navbar.module.scss\"\r\n\r\n\r\n\r\nconst Navbar = () => {\r\n    return <nav className={s.navbar}>\r\n        <div className={s.navbar__Item}>\r\n            <NavLink to=\"/profile\" className={s.link} activeClassName={s.active}>Profile</NavLink>\r\n        </div>\r\n        <div className={s.navbar__Item}>\r\n            <NavLink to=\"/dialogs\" className={s.link} activeClassName={s.active}>Messages</NavLink>\r\n        </div>\r\n        <div className={s.navbar__Item}>\r\n            <NavLink to=\"/users\" className={s.link} activeClassName={s.active}>Users  </NavLink>\r\n        </div>\r\n        <div className={s.navbar__Item}>\r\n            <NavLink to=\"/news\" className={s.link} activeClassName={s.active}>News</NavLink>\r\n        </div>\r\n        <div className={s.navbar__Item}>\r\n            <NavLink to=\"/music\" className={s.link} activeClassName={s.active}>Music</NavLink>\r\n        </div>\r\n        <div className={s.navbar__Item}>\r\n            <NavLink to=\"/settings\" className={s.link} activeClassName={s.active}>Settings</NavLink>\r\n        </div>\r\n    </nav>\r\n}\r\n\r\n\r\n\r\nexport default Navbar;\r\n","import s from \"./Posts.module.scss\"\r\n\r\n\r\ntype PropsType = {\r\n    id: number\r\n    userPhoto: any\r\n    message: string\r\n    likesCount: number\r\n}\r\n\r\n\r\n\r\nconst Post: React.FC<PropsType> = ({ id, userPhoto, message, likesCount }) => {\r\n    return <div className={s.post} key={id}>\r\n        <img className={s.userPhoto} src={userPhoto} alt=\"User avatar\" />\r\n        <div>\r\n            <div className={s.postText}>\r\n                <span>{message}</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <div className={s.likeBlock}>\r\n                <span>{likesCount}</span>\r\n                <button className={s.likeButton}>&#10084;</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\n\r\n\r\nexport default Post;\r\n","import s from \"./Posts.module.scss\"\r\nimport { Formik, Form, Field, FormikHelpers } from \"formik\";\r\nimport Post from \"./Post\";\r\nimport { PostType } from \"../../../store/types/types\";\r\n\r\n\r\n\r\ntype PropsType = {\r\n    posts: Array<PostType>\r\n    userPhoto: any\r\n    addNewPost: (postText: string) => void\r\n    isOwner: boolean | null\r\n}\r\n\r\n\r\n\r\nconst Posts: React.FC<PropsType> = ({ posts, userPhoto, addNewPost, isOwner }) => {\r\n    const profilePosts = [...posts].reverse().map(p =>\r\n        <Post key={p.id} message={p.message} likesCount={p.likesCount} userPhoto={userPhoto} id={p.id} />)\r\n\r\n    interface Values {\r\n        postText: string\r\n    }\r\n    const onSubmit = (values: Values, { resetForm }: FormikHelpers<Values>) => {\r\n        addNewPost(values.postText);\r\n        resetForm();\r\n    }\r\n\r\n    return <div>\r\n        {isOwner && <Formik initialValues={{ postText: \"\" }} onSubmit={onSubmit}>\r\n            <Form>\r\n                <Field name=\"postText\">\r\n                    {(props: any) => {\r\n\r\n                        const { field } = props;\r\n\r\n                        return <div>\r\n                            <textarea className={s.postField} type=\"text\" id=\"postText\" placeholder=\"Add new post...\" {...field}>{props.children}</textarea>\r\n                        </div>\r\n                    }}\r\n                </Field>\r\n                <button type=\"submit\" className={s.newPostButton}>Add post</button>\r\n            </Form>\r\n        </Formik>}\r\n        <div>\r\n            {profilePosts}\r\n        </div>\r\n    </div >\r\n}\r\n\r\n\r\nexport default Posts;\r\n","import s from \"./ProfileInfo.module.scss\";\r\nimport basicPhoto from \"../../../assets/images/basicUserPhoto.png\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ProfileInfoType } from \"../../../store/types/types\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\n\r\ntype PropsType = {\r\n    profileInfo: ProfileInfoType | null\r\n    status: string\r\n    updateStatus: (statusText: string) => void\r\n    updatePhoto: (file: any) => void\r\n    isOwner: boolean | null\r\n}\r\n\r\n\r\n\r\n\r\nconst ProfileInfo: React.FC<PropsType> = ({ profileInfo, status, updateStatus, updatePhoto, isOwner }) => {\r\n\r\n    console.log(profileInfo)\r\n\r\n    const [statusEditMode, setStatusEditMode] = useState(false)\r\n    const [statusText, setStatusText] = useState(status)\r\n\r\n    useEffect(() => {\r\n        setStatusText(status);\r\n    }, [status])\r\n\r\n    const saveNewStatus = () => {\r\n        updateStatus(statusText);\r\n        setStatusEditMode(false)\r\n    }\r\n\r\n    const onStatusTextChanged = (e: React.FormEvent<HTMLInputElement>) => {\r\n        setStatusText(e.currentTarget.value);\r\n    }\r\n    const onMainPhotoSelected = (e: any) => {\r\n        updatePhoto(e.target.files[0]);\r\n    }\r\n\r\n\r\n\r\n    if (!profileInfo) return <div>LLLLLoadign...</div>\r\n\r\n\r\n\r\n    return <div className={s.profileInfo_wrapper}>\r\n\r\n        {/* <span className={s.userName}>{profileInfo.fullName}</span> */}\r\n        <div className={s.userPhoto}>\r\n                <label htmlFor=\"photoFile\" >\r\n                    <img \r\n                        src={profileInfo.photos.large ? profileInfo.photos.large : basicPhoto} \r\n                        className={isOwner? s.ownerPhoto: \"\"} \r\n                        alt=\"User Avatar\" \r\n                    />\r\n                </label>\r\n            {isOwner && <div>\r\n                <input id=\"photoFile\" className={s.photoFile} type=\"file\" onChange={onMainPhotoSelected} />\r\n                <button className={s.editProfile}>\r\n                    <NavLink to=\"/settings\" >\r\n                        Edit profile\r\n                    </NavLink>\r\n                </button>\r\n                \r\n            </div>}\r\n        </div>\r\n\r\n\r\n\r\n        <div className={s.aboutMe}>\r\n            <h1 className={s.userName}>{profileInfo.fullName}</h1>\r\n            <div className={isOwner? s.userStatus: \"\"} onClick={() => { setStatusEditMode(true) }}>\r\n                <label htmlFor=\"status\">Status: </label>\r\n                {statusEditMode && isOwner\r\n                    ? <input value={statusText} onChange={onStatusTextChanged} onBlur={saveNewStatus} autoFocus={true} />\r\n                    : <span id=\"status\" >\r\n                        {status ? status : \"User has no status\"}\r\n                    </span>}\r\n            </div>\r\n            \r\n\r\n            <div className={s.aboutMeInfo}>\r\n                <p>About me: {profileInfo.aboutMe ? profileInfo.aboutMe : \"\"}</p>\r\n            </div>\r\n            <div className={s.jobInfo}>\r\n                <p>{profileInfo.lookingForAJob? `Looking for a job `: \"Not looking for a job \"}</p>\r\n                <p>{profileInfo.lookingForAJobDescription? profileInfo.lookingForAJobDescription: \"\"}</p>\r\n            </div>\r\n\r\n            <div className={s.contactsBlock}>\r\n                {/* <a href={profileInfo.contacts.facebook} className={s.contacts}>facebook</a>\r\n                <a href={profileInfo.contacts.website} className={s.contacts}>website</a>\r\n                <a href={profileInfo.contacts.vk} className={s.contacts}>vkontakte</a>\r\n                <a href={profileInfo.contacts.twitter} className={s.contacts}>twitter</a>\r\n                <a href={profileInfo.contacts.instagram} className={s.contacts}>instagram</a>\r\n                <a href={profileInfo.contacts.youtube} className={s.contacts}>youtube</a>\r\n                <a href={profileInfo.contacts.github} className={s.contacts}>github</a>\r\n                <a href={profileInfo.contacts.mainLink} className={s.contacts}>mainLink</a> */}\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\n\r\nexport default ProfileInfo;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router\";\r\nimport { compose } from \"redux\";\r\nimport withAuthRedirect from \"../../hocs/withAuthRedirect\";\r\nimport { profileActions, getProfile, getStatus, updatePhoto, updateStatus } from \"../../store/profile-reducer\";\r\nimport Posts from \"./Posts/Posts\";\r\nimport basicPhoto from \"../../assets/images/basicUserPhoto.png\";\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport { PostType, ProfileInfoType } from \"../../store/types/types\";\r\nimport { AppStateType } from \"../../store/store\";\r\n\r\ntype TStateProps = {\r\n    profileInfo: ProfileInfoType | null\r\n    status: string\r\n    posts: Array<PostType>\r\n    ownerId: number | null\r\n}\r\ntype TDispatchProps = {\r\n    getProfile: (userId: number) => void\r\n    getStatus: (userId: number) => void\r\n    addNewPost: (postText: string) => void\r\n    updateStatus: (status: string) => void\r\n    updatePhoto: (photoFile: any) => any\r\n}\r\ntype TOwnProps = {\r\n    match: any\r\n}\r\n\r\n\r\ntype PropsType = TStateProps & TDispatchProps & TOwnProps\r\n\r\nconst Profile: React.FC<PropsType> = ({ getProfile, getStatus, match, ownerId, profileInfo, status, posts, addNewPost, updateStatus, updatePhoto }) => {\r\n    useEffect(() => {\r\n        if (ownerId !== null){\r\n            getProfile(match.params.userId ? match.params.userId : ownerId);\r\n            getStatus(match.params.userId ? match.params.userId : ownerId);\r\n        }\r\n    }, [match.params.userId, ownerId, getProfile, getStatus])\r\n\r\n    useEffect(() => {\r\n        \r\n    }, [match.params.userId, ownerId])\r\n\r\n\r\n    if (!profileInfo) {\r\n        return <div>Loading...</div>\r\n    }\r\n\r\n    return <>\r\n        <ProfileInfo\r\n            profileInfo={profileInfo}\r\n            status={status}\r\n            updateStatus={updateStatus}\r\n            updatePhoto={updatePhoto}\r\n            isOwner={!match.params.userId}\r\n        />\r\n        <Posts\r\n            posts={posts}\r\n            userPhoto={profileInfo.photos.small ? profileInfo.photos.small : basicPhoto}\r\n            addNewPost={addNewPost}\r\n            isOwner={!match.params.userId}\r\n        />\r\n    </>\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): TStateProps => ({\r\n    profileInfo: state.profile.profileInfo,\r\n    status: state.profile.status,\r\n    posts: state.profile.posts,\r\n    ownerId: state.auth.userData.id,\r\n})\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect<TStateProps, TDispatchProps, TOwnProps, AppStateType>(mapStateToProps, { getProfile, getStatus, addNewPost: profileActions.addNewPost, updateStatus, updatePhoto }),\r\n    withAuthRedirect,\r\n    withRouter\r\n)(Profile);\r\n","import { ErrorMessage, Field, Form, Formik } from \"formik\";\r\nimport { connect } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\nimport withAuthRedirect from \"../../hocs/withAuthRedirect\";\r\nimport { getProfile, getStatus, updateProfile } from \"../../store/profile-reducer\";\r\nimport s from \"./Settings.module.scss\"\r\nimport * as Yup from \"yup\";\r\nimport { AppStateType } from \"../../store/store\";\r\nimport { ProfileInfoType } from \"../../store/types/types\";\r\nimport React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\n\r\ntype TStateProps = {\r\n    profileInfo: ProfileInfoType | null\r\n    ownerId: number | null\r\n}\r\ntype TDispatchProps = {\r\n    updateProfile: (profileInfo: ProfileInfoType) => void\r\n    getProfile: (userId: number) => void\r\n    getStatus: (userId: number) => void\r\n}\r\ntype PropsType = TStateProps & TDispatchProps\r\n\r\nconst Settings: React.FC<PropsType> = ({ profileInfo, updateProfile, ownerId, getProfile, getStatus }) => {\r\n    if (ownerId === null) return <div>LLOADING.........</div>\r\n\r\n    if (ownerId !== profileInfo?.userId) {\r\n        getProfile(ownerId);\r\n        getStatus(ownerId);\r\n    }\r\n    if (!profileInfo || ownerId !== profileInfo.userId) {\r\n        return <div>Loading...</div>\r\n    }\r\n\r\n    const initialValues: ProfileInfoType = {\r\n        aboutMe: profileInfo.aboutMe,\r\n        userId: profileInfo.userId,\r\n        contacts: {\r\n            facebook: profileInfo.contacts.facebook,\r\n            website: profileInfo.contacts.website,\r\n            vk: profileInfo.contacts.vk,\r\n            twitter: profileInfo.contacts.twitter,\r\n            instagram: profileInfo.contacts.instagram,\r\n            youtube: profileInfo.contacts.youtube,\r\n            github: profileInfo.contacts.github,\r\n            mainLink: profileInfo.contacts.mainLink,\r\n        },\r\n        lookingForAJob: profileInfo.lookingForAJob,\r\n        lookingForAJobDescription: profileInfo.lookingForAJobDescription,\r\n        fullName: profileInfo.fullName,\r\n        photos: profileInfo.photos\r\n    }\r\n    // above weird code :/ \"initialValues.photos\"\r\n    const onSubmit = (values: ProfileInfoType) => {\r\n        updateProfile(values)\r\n    }\r\n\r\n    const validationSchema = Yup.object({\r\n        contacts: Yup.object({\r\n            facebook: Yup.string().url(\"! Invalid url format\"),\r\n            website: Yup.string().url(\"! Invalid url format\"),\r\n            vk: Yup.string().url(\"! Invalid url format\"),\r\n            twitter: Yup.string().url(\"! Invalid url format\"),\r\n            instagram: Yup.string().url(\"! Invalid url format\"),\r\n            youtube: Yup.string().url(\"! Invalid url format\"),\r\n            github: Yup.string().url(\"! Invalid url format\"),\r\n            mainLink: Yup.string().url(\"! Invalid url format\")\r\n        }),\r\n        aboutMe: Yup.string().max(200, \"! Too long text\"),\r\n        fullName: Yup.string().max(20, \"! Too long name\"),\r\n        lookingForAJobDescription: Yup.string().max(200, \"! Too long text\")\r\n    })\r\n\r\n    return <div className={s.settingsComponent}>\r\n        <h2>Account settings</h2>\r\n\r\n        <Formik initialValues={initialValues} onSubmit={onSubmit} validationSchema={validationSchema}>\r\n            <Form>\r\n                <div className={s.settingsWrapper}>\r\n                    <label htmlFor=\"aboutMe\">About Me:</label>\r\n                    <Field as=\"textarea\" name=\"aboutMe\" id=\"aboutMe\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"aboutMe\" /></span>\r\n                    \r\n                    <label htmlFor=\"fullName\">Full Name:</label>\r\n                    <Field type=\"text\" name=\"fullName\" id=\"fullName\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"fullName\" /></span>\r\n                    \r\n                    <label htmlFor=\"lookingForAJobDescription\">Job information:</label>\r\n                    <Field as=\"textarea\" name=\"lookingForAJobDescription\" id=\"lookingForAJobDescription\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"lookingForAJobDescription\" /></span>\r\n\r\n                    <label htmlFor=\"lookingForAJob\"> Looking for a job:</label>\r\n                    <Field type=\"checkbox\" name=\"lookingForAJob\" id=\"lookingForAJob\"/>\r\n                    <label htmlFor=\"lookingForAJob\" className={s.toggle }><span></span></label>\r\n                    <span></span>\r\n                    \r\n\r\n\r\n\r\n                    <h2>Contacts</h2> <span></span> <span></span>\r\n\r\n                    <label htmlFor=\"facebook\">Facebook:</label>\r\n                    <Field type=\"text\" name=\"contacts.facebook\" id=\"facebook\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"contacts.facebook\" /></span>\r\n\r\n                    <label htmlFor=\"website\">Website:</label>\r\n                    <Field type=\"text\" name=\"contacts.website\" id=\"website\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"contacts.website\" /></span>\r\n\r\n                    <label htmlFor=\"vk\">Vkontakte:</label>\r\n                    <Field type=\"text\" name=\"contacts.vk\" id=\"vk\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"contacts.vk\" /></span>\r\n\r\n                    <label htmlFor=\"twitter\">Twitter:</label>\r\n                    <Field type=\"text\" name=\"contacts.twitter\" id=\"twitter\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"contacts.twitter\" /></span>\r\n\r\n                    <label htmlFor=\"instagram\">Instagram:</label>\r\n                    <Field type=\"text\" name=\"contacts.instagram\" id=\"instagram\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"contacts.instagram\" /></span>\r\n\r\n                    <label htmlFor=\"youtube\">Youtube:</label>\r\n                    <Field type=\"text\" name=\"contacts.youtube\" id=\"youtube\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"contacts.youtube\" /></span>\r\n\r\n                    <label htmlFor=\"github\">Github:</label>\r\n                    <Field type=\"text\" name=\"contacts.github\" id=\"github\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"contacts.github\" /></span>\r\n\r\n                    <label htmlFor=\"mainLink\">MainLink:</label>\r\n                    <Field type=\"text\" name=\"contacts.mainLink\" id=\"mainLink\" />\r\n                    <span className={s.errorMessage}><ErrorMessage name=\"contacts.mainLink\" /></span>\r\n\r\n                </div>\r\n                <NavLink to=\"/profile\">\r\n                <button type=\"submit\" className={s.submitButton}>\r\n                    Save changes\r\n                </button>\r\n                </NavLink>\r\n            </Form>\r\n        </Formik>\r\n    </div >\r\n}\r\n\r\nconst maStateToProps = (state: AppStateType) => ({\r\n    profileInfo: state.profile.profileInfo,\r\n    ownerId: state.auth.userData.id\r\n})\r\n\r\nexport default compose<React.ComponentType>(\r\n    withAuthRedirect,\r\n    connect(maStateToProps, { updateProfile, getProfile, getStatus })\r\n)(Settings);","import { UserType } from \"../store/types/types\";\r\nimport { BasicResponseType, instance } from \"./instance-api\";\r\n\r\n\r\ntype TgetUsers = {\r\n    items: Array<UserType>\r\n    totalCount: number\r\n    error: string\r\n}\r\n\r\nexport const usersAPI = {\r\n    getUsers(count: number, page: number, term: string) {\r\n        return instance.get<TgetUsers>(`/users/?count=${count}&page=${page}`).then(res => res.data)\r\n    },\r\n    follow(userId: number) {\r\n        return instance.post<BasicResponseType>(`/follow/${userId}`).then(res => res.data)\r\n    },\r\n    unfollow(userId: number) {\r\n        return instance.delete<BasicResponseType>(`/follow/${userId}`).then(res => res.data)\r\n    }\r\n}\r\n\r\n\r\n","import s from \"./Paginator.module.scss\";\r\n\r\ntype PropsType = {\r\n    totalItemsCount: number\r\n    onPageChanged: (pageNumber: number) => void\r\n    currentPage?: number\r\n    itemsPerPage: number\r\n    loading: boolean\r\n    pagesInPaginator?: number\r\n}\r\n\r\n\r\nconst Paginator: React.FC<PropsType> = ({ totalItemsCount, onPageChanged, currentPage = 1, itemsPerPage, loading, pagesInPaginator = 10 }) => {\r\n    let totalPages = Math.ceil(totalItemsCount / itemsPerPage);\r\n\r\n    let lastPage = pagesInPaginator + currentPage - 1;\r\n\r\n    let pages = [];\r\n\r\n    if (currentPage >= 7 && currentPage <= totalPages - 3) {\r\n        for (let i = currentPage; i <= lastPage; i++) {\r\n            pages.push(<li><button key={i} className={currentPage === i - 6 ? s.activePage : s.page} onClick={() => { onPageChanged(i - 6) }}>{i - 6}</button></li>)\r\n        }\r\n    } else if (currentPage < 7) {\r\n        for (let i = 1; i <= pagesInPaginator; i++) {\r\n            pages.push(<li><button key={i} className={currentPage === i ? s.activePage : s.page} onClick={() => { onPageChanged(i) }}>{i}</button></li>)\r\n        }\r\n    } else if (currentPage > totalPages - 3) {\r\n        for (let i = totalPages - pagesInPaginator; i < totalPages; i++) {\r\n            pages.push(<li><button key={i} className={currentPage === i ? s.activePage : s.page} onClick={() => { onPageChanged(i) }}>{i}</button></li>)\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    return <nav className={s.paginatorWrapper}>\r\n        <button className={s.page} disabled={currentPage === 1 || loading ? true\r\n            : false} onClick={() => onPageChanged(currentPage - 1)}>&#60;</button>\r\n        <ul className={s.pages}>\r\n            {pages}\r\n        </ul>\r\n        \r\n        \r\n\r\n        <span>{\" ... \"}</span>\r\n        <button className={currentPage === totalPages ? s.activePage : s.page} onClick={() => onPageChanged(totalPages)}  >{totalPages}</button>\r\n\r\n        <button className={s.page} disabled={currentPage === totalPages || loading ? true : false} onClick={() => onPageChanged(currentPage + 1)}>&#62;</button>\r\n    </nav>\r\n}\r\n\r\n\r\n\r\nexport default Paginator;","import React, { useState } from \"react\";\r\nimport { NavLink, Redirect } from \"react-router-dom\";\r\nimport { usersAPI } from \"../../../api/users-api\";\r\nimport basicPhoto from \"../../../assets/images/basicUserPhoto.png\";\r\nimport s from \"./UserItem.module.scss\";\r\n\r\n\r\ntype PropsType = {\r\n    photo: string | null\r\n    name: string\r\n    status: string | null\r\n    id: number\r\n    followed: boolean\r\n}\r\n\r\n\r\n\r\nconst UserItem: React.FC<PropsType> = ({ photo, name, status, id, followed }) => {\r\n\r\n    const [isFollowed, setIsFollowed] = useState(followed);\r\n    const [loading, isLoading] = useState(false);\r\n\r\n    const follow = async (id: number) => {\r\n        isLoading(true)\r\n        const res = await usersAPI.follow(id);\r\n        if (res.resultCode === 0) {\r\n            setIsFollowed(true);\r\n        }\r\n        isLoading(false);\r\n    }\r\n\r\n    const unfollow = async (id: number) => {\r\n        isLoading(true)\r\n        const res = await usersAPI.unfollow(id);\r\n        if (res.resultCode === 0) {\r\n            setIsFollowed(false);\r\n        }\r\n        isLoading(false);\r\n    }\r\n\r\n    return <div className={s.userItem} key={id}>\r\n        <div>\r\n            <NavLink to={`/profile/${id}`}>\r\n                <img onClick={() => { <Redirect to={`profile/${id}`} /> }} src={photo ? photo : basicPhoto} className={s.userPhoto} alt=\"User Avatar\" />\r\n            </NavLink>\r\n        </div>\r\n\r\n        <div className={s.userInfo}>\r\n            <NavLink to={`/profile/${id}`} className={s.userName}>{name}</NavLink>\r\n            <span>{status ? status : \"User has no status\"}</span>\r\n        </div>\r\n\r\n        <div className={s.subscribeBlock}>\r\n            {isFollowed\r\n                ? <button disabled={loading} onClick={() => { unfollow(id) }} className={s.followedButton}>Unfollow</button>\r\n                : <button disabled={loading} onClick={() => { follow(id) }} className={s.unfollowedButton}>Follow</button>\r\n            }\r\n        </div>\r\n    </div>\r\n}\r\n\r\n\r\nexport default UserItem;","import { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport TextError from \"../../common/TextError/TextError\";\r\nimport s from \"./UsersSearchForm.module.scss\"\r\n\r\n\r\ntype Values = {\r\n    term: string\r\n}\r\n\r\nconst onSubmit = (values: Values) => {\r\n\r\n}\r\nconst validationSchema = Yup.object({\r\n    term: Yup.string().max(25, \"25 characters maximum\")\r\n})\r\n\r\n\r\nconst UsersSearchForm = () => {\r\n    return <Formik initialValues={{ term: \"\" }} onSubmit={onSubmit} validationSchema={validationSchema}>\r\n        <Form>\r\n            <Field type=\"text\" name=\"term\" className={s.searchField} />\r\n            <button className={s.searchButton}> Find User</button><br />\r\n            <ErrorMessage name=\"term\" component={TextError} />\r\n            <br />\r\n        </Form>\r\n    </Formik>\r\n}\r\n\r\n\r\nexport default UsersSearchForm","export default __webpack_public_path__ + \"static/media/preloader.c1479316.gif\";","import { useEffect, useState } from \"react\";\r\n// import { connect } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\nimport { usersAPI } from \"../../api/users-api\";\r\nimport withAuthRedirect from \"../../hocs/withAuthRedirect\";\r\nimport { UserType } from \"../../store/types/types\";\r\n// import { getUsers } from \"../../store/users-reducer.ts\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport UserItem from \"./UserItem/UserItem\";\r\nimport UsersSearchForm from \"./UsersSearchForm/UsersSearchForm\";\r\nimport preloader from \"../../assets/images/preloader.gif\";\r\nimport s from \"./Users.module.scss\";\r\n\r\nconst Users: React.FC = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [users, setUsers] = useState<Array<UserType>>([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalUsersCount, setTotalUsersCount] = useState(0);\r\n    const usersPerPage = 20;\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchUsers = async () => {\r\n            setLoading(true);\r\n            const res = await usersAPI.getUsers(usersPerPage, currentPage, \"\");\r\n            setUsers(res.items)\r\n            setTotalUsersCount(res.totalCount)\r\n            setLoading(false);\r\n        }\r\n        fetchUsers();\r\n    }, [currentPage])\r\n\r\n    const onPageChanged = (page: number) => {\r\n        setCurrentPage(page);\r\n    }\r\n\r\n\r\n    if (!users) {\r\n        return <div>Loading</div>\r\n    }\r\n    let showUsers = users.map(u => <UserItem key={u.id} name={u.name} id={u.id} photo={u.photos.small} followed={u.followed} status={u.status} />)\r\n\r\n    return <div>\r\n        <UsersSearchForm />\r\n        {!loading?<div>\r\n            <Paginator\r\n            totalItemsCount={totalUsersCount}\r\n            onPageChanged={onPageChanged}\r\n            currentPage={currentPage}\r\n            itemsPerPage={usersPerPage}\r\n            loading={loading}\r\n            pagesInPaginator={10} />\r\n\r\n        {showUsers}\r\n\r\n        <Paginator\r\n            totalItemsCount={totalUsersCount}\r\n            onPageChanged={onPageChanged}\r\n            currentPage={currentPage}\r\n            itemsPerPage={usersPerPage}\r\n            loading={loading}\r\n            pagesInPaginator={10} />\r\n            </div>\r\n        : <div className={s.preloaderBlock}>\r\n            <img src={preloader} />\r\n        </div>\r\n        }\r\n    </div >\r\n}\r\n\r\n\r\n\r\nexport default compose(\r\n    withAuthRedirect\r\n)(Users);\r\n","import { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect, Route, Switch } from \"react-router\";\nimport s from './App.module.scss';\nimport Dialogs from \"./components/Dialogs/Dialogs\";\nimport Header from \"./components/Header/Header\";\nimport Login from \"./components/Login/Login\";\nimport Navbar from \"./components/Navbar/Navbar\";\nimport Profile from \"./components/Profile/Profile\";\nimport Settings from \"./components/Settings/Settings\";\nimport Users from \"./components/Users/Users\";\nimport { userAuthorizing } from \"./store/auth-reducer\";\nimport { AppStateType } from \"./store/store\";\nimport { ProfileInfoType } from \"./store/types/types\";\n\ntype TStateProps = {\n  isAuth: boolean | null\n  profileInfo: ProfileInfoType | null\n  status: string | null\n}\n\ntype TDispatchProps = {\n  userAuthorizing: () => void\n}\ntype TOwnProps = {\n\n} \n\ntype PropsType = TStateProps & TDispatchProps & TOwnProps\n\nconst App: React.FC<PropsType> = ({ userAuthorizing, isAuth }) => {\n\n  useEffect(() => {\n    userAuthorizing();\n  }, [userAuthorizing])\n\n  // if (isAuth === false) {\n  //   <Redirect to=\"/login\" />\n  // }\n  return <div className={s.app__Wrapper}>\n    <header className={s.app__Header}>\n      <Header />\n    </header>\n\n    <div className={s.app__Navbar}>\n      <Navbar />\n    </div>\n\n    <main className={s.app__Content}>\n      <Switch>\n        <Redirect exact from=\"/\" to=\"/profile\" />\n        <Route path=\"/profile/:userId?\" render={() => <Profile />} />\n        <Route path=\"/dialogs\" render={() => <Dialogs />} />\n        <Route path=\"/users\" render={() => <Users />} />\n        <Route path=\"/settings\" render={() => <Settings />} />\n        <Route path=\"/login\" render={() => <Login />} />\n        <Redirect from=\"\" to=\"/profile\" />\n      </Switch>\n    </main>\n\n  </div>\n}\n\nconst mapStateToProps = (state: AppStateType): TStateProps => ({\n  profileInfo: state.profile.profileInfo,\n  status: state.profile.status,\n  isAuth: state.auth.isAuth\n})\n\n\nexport default connect<TStateProps, TDispatchProps, TOwnProps, AppStateType>(mapStateToProps, { userAuthorizing })(App);","import { InferActionTypes } from './store';\r\nimport { usersAPI } from \"../api/users-api\";\r\nimport { CommonThunkCreatorType, EntireUsersType, UserType } from \"./types/types\";\r\n\r\nconst SET_USERS = \"SN/USERS/SET_USERS\";\r\n\r\n\r\n\r\n\r\nlet initialState = {\r\n    users: null as EntireUsersType | null,\r\n}\r\n\r\n\r\nconst usersReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_USERS: {\r\n            return { ...state, users: action.users, totalUsersCount: action.totalUsersCount } as any\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\n\r\nexport const usersActions = {\r\n    setUsers: (users: Array<UserType>, totalUsersCount: number) => ({ type: SET_USERS, users, totalUsersCount })\r\n}\r\n\r\n\r\n\r\n\r\nexport const getUsers = (count: number, page: number, term: string): ThunkType => async dispatch => {\r\n    const res = await usersAPI.getUsers(count, page, \"\")\r\n    if (!res.error) {\r\n        dispatch(usersActions.setUsers(res.items, res.totalCount));\r\n    }\r\n}\r\n\r\n\r\nexport default usersReducer;\r\n\r\n\r\ntype InitialStateType = typeof initialState\r\ntype ActionsType = InferActionTypes<typeof usersActions>\r\ntype ThunkType = CommonThunkCreatorType<ActionsType>","import { applyMiddleware, combineReducers, compose, createStore } from \"redux\"\r\nimport thunk from \"redux-thunk\"\r\nimport profileReducer from \"./profile-reducer\"\r\nimport authReducer from \"./auth-reducer\"\r\nimport dialogsReducer from \"./dialogs-reducer\"\r\nimport usersReducer from \"./users-reducer\"\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    profile: profileReducer,\r\n    auth: authReducer,\r\n    users: usersReducer,\r\n    dialogs: dialogsReducer\r\n});\r\ntype RootReducerType = typeof rootReducer\r\nexport type AppStateType = ReturnType<RootReducerType>\r\n//@ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\n\r\nexport type InferActionTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never\r\n\r\n\r\n\r\nconst store = createStore(rootReducer, composeEnhancers( applyMiddleware(thunk)));\r\n\r\nexport default store;","import ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </Router>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogsWrapper\":\"Dialogs_dialogsWrapper__1y2rU\",\"dialogsUsers\":\"Dialogs_dialogsUsers__1HD5x\",\"linkToUserChat\":\"Dialogs_linkToUserChat__4nRSW\",\"dialogsUserPhoto\":\"Dialogs_dialogsUserPhoto__2dG1w\",\"dialogsUserWrapper\":\"Dialogs_dialogsUserWrapper__3awDP\",\"dialogsMessages\":\"Dialogs_dialogsMessages__3fwCp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header_wrapper\":\"Header_header_wrapper__Aeret\",\"mediaBlock\":\"Header_mediaBlock__2B-Xh\",\"logo\":\"Header_logo__2_Slf\",\"slogan\":\"Header_slogan__2ab9O\",\"loginBlock\":\"Header_loginBlock__2ta3n\",\"linkToProfile\":\"Header_linkToProfile__2mVSy\",\"linkToLogin\":\"Header_linkToLogin__2WRmu\",\"logoutButton\":\"Header_logoutButton__2ICDe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postField\":\"Posts_postField__3kgQM\",\"newPostButton\":\"Posts_newPostButton__3klq3\",\"post\":\"Posts_post__fZPPo\",\"userPhoto\":\"Posts_userPhoto__11TS2\",\"postText\":\"Posts_postText__2nuXj\",\"likeBlock\":\"Posts_likeBlock__1fh5-\",\"likeButton\":\"Posts_likeButton__ijqjM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginWrapper\":\"Login_loginWrapper__276UC\",\"loginButton\":\"Login_loginButton__Xv8tB\",\"captchaBlock\":\"Login_captchaBlock__1sJjV\",\"serverErrorMessage\":\"Login_serverErrorMessage__2_LT5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userItem\":\"UserItem_userItem__1he0e\",\"userPhoto\":\"UserItem_userPhoto__pEM9g\",\"userInfo\":\"UserItem_userInfo__1WxTM\",\"userName\":\"UserItem_userName__1_q2g\",\"subscribeBlock\":\"UserItem_subscribeBlock__2nLCp\",\"followedButton\":\"UserItem_followedButton__2zRpQ\",\"unfollowedButton\":\"UserItem_unfollowedButton__3-lDR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app__Wrapper\":\"App_app__Wrapper__e5wQU\",\"app__Header\":\"App_app__Header__3CKVQ\",\"app__Navbar\":\"App_app__Navbar__1dPdj\",\"app__Content\":\"App_app__Content__2n7KG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchField\":\"UsersSearchForm_searchField__17OXu\",\"searchButton\":\"UsersSearchForm_searchButton__33p-b\"};"],"sourceRoot":""}